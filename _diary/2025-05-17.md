#spring-security #oauth2

```java
// Configuration
ReactiveOAuth2ClientAutoConfiguration
	@Import(ReactiveOAuth2ClientConfigurations.ReactiveOAuth2ClientConfiguration)
	ReactiveOAuth2ClientConfiguration
		@ConditionalOnBean(ReactiveClientRegistrationRepository)
	    SecurityWebFilterChainConfiguration
		.springSecurityFilterChain(ServerHttpSecurity)
			ServerHttpSecurity.build()
			.getAuthenticationEntryPoint()
				new DelegatingServerAuthenticationEntryPoint()
```

```java
/**
 * @see ReactiveOAuth2ClientConfiguration.SecurityWebFilterChainConfiguration
 */
@Bean
SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {
	http.authorizeExchange((exchange) -> exchange.anyExchange().authenticated());
	// http.oauth2Login(withDefaults());
	http.oauth2Client(withDefaults());
	return http.build();
}
```

```typescript
// 
export async function startAuthorization(serverUrl, { metadata, clientInformation, redirectUrl, scope, }) {
    authorizationUrl.searchParams.set("redirect_uri", String(redirectUrl));
    authorizationUrl.searchParams.set("audience", String(serverUrl + "/api/v2/"));
}
```